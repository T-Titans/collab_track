{"ast":null,"code":"import{Navigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,requiredRole}=_ref;const{user,isLoading}=useAuth();// Show loading state while checking authentication\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',backgroundColor:'#f8fafc'},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'2rem',backgroundColor:'white',borderRadius:'8px',boxShadow:'0 1px 3px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1.5rem',marginBottom:'1rem'},children:\"\\u23F3\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:'#6b7280'},children:\"Loading...\"})]})});}// Redirect to login if not authenticated\nif(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// Check role if requiredRole is specified\nif(requiredRole){// Define role hierarchy (admin has access to everything)\nconst roleHierarchy={'admin':['admin','project_manager','team_member'],'project_manager':['project_manager','team_member'],'team_member':['team_member']};const userRole=user.role;const allowedRoles=roleHierarchy[requiredRole]||[requiredRole];if(!allowedRoles.includes(userRole)){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',justifyContent:'center',alignItems:'center',height:'60vh',padding:'2rem',textAlign:'center',backgroundColor:'#f8fafc'},children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',padding:'2rem',borderRadius:'8px',boxShadow:'0 1px 3px rgba(0, 0, 0, 0.1)',maxWidth:'400px',width:'100%'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'3rem',marginBottom:'1rem'},children:\"\\uD83D\\uDEAB\"}),/*#__PURE__*/_jsx(\"h2\",{style:{color:'#ef4444',marginBottom:'1rem',fontSize:'1.5rem'},children:\"Access Denied\"}),/*#__PURE__*/_jsxs(\"p\",{style:{color:'#6b7280',marginBottom:'2rem',lineHeight:'1.5'},children:[\"You don't have permission to access this page.\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"Required role: \",requiredRole.replace('_',' ')]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'0.875rem'},children:[\"Your role: \",user.role.replace('_',' ')]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.history.back(),style:{padding:'0.75rem 1.5rem',backgroundColor:'#3b82f6',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontWeight:'500'},children:\"Go Back\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/dashboard',style:{padding:'0.75rem 1.5rem',backgroundColor:'#6b7280',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',fontWeight:'500'},children:\"Go to Dashboard\"})]})]})});}}// If all checks pass, render the children\nreturn/*#__PURE__*/_jsx(_Fragment,{children:children});};export default ProtectedRoute;","map":{"version":3,"names":["Navigate","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProtectedRoute","_ref","children","requiredRole","user","isLoading","style","display","justifyContent","alignItems","height","backgroundColor","textAlign","padding","borderRadius","boxShadow","fontSize","marginBottom","margin","color","to","replace","roleHierarchy","userRole","role","allowedRoles","includes","flexDirection","maxWidth","width","lineHeight","gap","onClick","window","history","back","border","cursor","fontWeight","location","href"],"sources":["C:/Users/USER/Documents/OWETHU_PEYANE/collab_track/frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["import { ReactNode } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\ninterface ProtectedRouteProps {\r\n  children: ReactNode;\r\n  requiredRole?: 'admin' | 'project_manager' | 'team_member';\r\n}\r\n\r\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ \r\n  children, \r\n  requiredRole \r\n}) => {\r\n  const { user, isLoading } = useAuth();\r\n\r\n  // Show loading state while checking authentication\r\n  if (isLoading) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        height: '100vh',\r\n        backgroundColor: '#f8fafc'\r\n      }}>\r\n        <div style={{ \r\n          textAlign: 'center',\r\n          padding: '2rem',\r\n          backgroundColor: 'white',\r\n          borderRadius: '8px',\r\n          boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\r\n        }}>\r\n          <div style={{ fontSize: '1.5rem', marginBottom: '1rem' }}>‚è≥</div>\r\n          <p style={{ margin: 0, color: '#6b7280' }}>Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Redirect to login if not authenticated\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  // Check role if requiredRole is specified\r\n  if (requiredRole) {\r\n    // Define role hierarchy (admin has access to everything)\r\n    const roleHierarchy = {\r\n      'admin': ['admin', 'project_manager', 'team_member'],\r\n      'project_manager': ['project_manager', 'team_member'],\r\n      'team_member': ['team_member']\r\n    };\r\n\r\n    const userRole = user.role;\r\n    const allowedRoles = roleHierarchy[requiredRole] || [requiredRole];\r\n    \r\n    if (!allowedRoles.includes(userRole)) {\r\n      return (\r\n        <div style={{ \r\n          display: 'flex', \r\n          flexDirection: 'column',\r\n          justifyContent: 'center', \r\n          alignItems: 'center', \r\n          height: '60vh',\r\n          padding: '2rem',\r\n          textAlign: 'center',\r\n          backgroundColor: '#f8fafc'\r\n        }}>\r\n          <div style={{ \r\n            backgroundColor: 'white',\r\n            padding: '2rem',\r\n            borderRadius: '8px',\r\n            boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n            maxWidth: '400px',\r\n            width: '100%'\r\n          }}>\r\n            <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>üö´</div>\r\n            <h2 style={{ \r\n              color: '#ef4444', \r\n              marginBottom: '1rem',\r\n              fontSize: '1.5rem'\r\n            }}>\r\n              Access Denied\r\n            </h2>\r\n            <p style={{ \r\n              color: '#6b7280', \r\n              marginBottom: '2rem',\r\n              lineHeight: '1.5'\r\n            }}>\r\n              You don't have permission to access this page.<br />\r\n              <strong>Required role: {requiredRole.replace('_', ' ')}</strong><br />\r\n              <span style={{ fontSize: '0.875rem' }}>\r\n                Your role: {user.role.replace('_', ' ')}\r\n              </span>\r\n            </p>\r\n            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center' }}>\r\n              <button \r\n                onClick={() => window.history.back()}\r\n                style={{\r\n                  padding: '0.75rem 1.5rem',\r\n                  backgroundColor: '#3b82f6',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  cursor: 'pointer',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                Go Back\r\n              </button>\r\n              <button \r\n                onClick={() => window.location.href = '/dashboard'}\r\n                style={{\r\n                  padding: '0.75rem 1.5rem',\r\n                  backgroundColor: '#6b7280',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  cursor: 'pointer',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                Go to Dashboard\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  // If all checks pass, render the children\r\n  return <>{children}</>;\r\n};\r\n\r\nexport default ProtectedRoute;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}