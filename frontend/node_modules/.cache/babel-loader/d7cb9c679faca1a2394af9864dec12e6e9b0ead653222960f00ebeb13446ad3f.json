{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\USER\\\\Documents\\\\OWETHU_PEYANE\\\\collab_track\\\\frontend\\\\src\\\\components\\\\ProtectedRoute.tsx\",\n  _s = $RefreshSig$();\nimport { Navigate } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  requiredRole\n}) => {\n  _s();\n  const {\n    user,\n    isLoading\n  } = useAuth();\n\n  // Show loading state while checking authentication\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        backgroundColor: '#f8fafc'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          padding: '2rem',\n          backgroundColor: 'white',\n          borderRadius: '8px',\n          boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '1.5rem',\n            marginBottom: '1rem'\n          },\n          children: \"\\u23F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: 0,\n            color: '#6b7280'\n          },\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Redirect to login if not authenticated\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Check role if requiredRole is specified\n  if (requiredRole) {\n    // Define role hierarchy (admin has access to everything)\n    const roleHierarchy = {\n      'admin': ['admin', 'project_manager', 'team_member'],\n      'project_manager': ['project_manager', 'team_member'],\n      'team_member': ['team_member']\n    };\n    const userRole = user.role;\n    const allowedRoles = roleHierarchy[requiredRole] || [requiredRole];\n    if (!allowedRoles.includes(userRole)) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '60vh',\n          padding: '2rem',\n          textAlign: 'center',\n          backgroundColor: '#f8fafc'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: 'white',\n            padding: '2rem',\n            borderRadius: '8px',\n            boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n            maxWidth: '400px',\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '3rem',\n              marginBottom: '1rem'\n            },\n            children: \"\\uD83D\\uDEAB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              color: '#ef4444',\n              marginBottom: '1rem',\n              fontSize: '1.5rem'\n            },\n            children: \"Access Denied\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#6b7280',\n              marginBottom: '2rem',\n              lineHeight: '1.5'\n            },\n            children: [\"You don't have permission to access this page.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 61\n            }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [\"Required role: \", requiredRole.replace('_', ' ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 79\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '0.875rem'\n              },\n              children: [\"Your role: \", user.role.replace('_', ' ')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '1rem',\n              justifyContent: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => window.history.back(),\n              style: {\n                padding: '0.75rem 1.5rem',\n                backgroundColor: '#3b82f6',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontWeight: '500'\n              },\n              children: \"Go Back\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => window.location.href = '/dashboard',\n              style: {\n                padding: '0.75rem 1.5rem',\n                backgroundColor: '#6b7280',\n                color: 'white',\n                border: 'none',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontWeight: '500'\n              },\n              children: \"Go to Dashboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n  // If all checks pass, render the children\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false);\n};\n_s(ProtectedRoute, \"6lKHjqCqGIRsHh92bje8H78laow=\", false, function () {\n  return [useAuth];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["Navigate","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","ProtectedRoute","children","requiredRole","_s","user","isLoading","style","display","justifyContent","alignItems","height","backgroundColor","textAlign","padding","borderRadius","boxShadow","fontSize","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","margin","color","to","replace","roleHierarchy","userRole","role","allowedRoles","includes","flexDirection","maxWidth","width","lineHeight","gap","onClick","window","history","back","border","cursor","fontWeight","location","href","_c","$RefreshReg$"],"sources":["C:/Users/USER/Documents/OWETHU_PEYANE/collab_track/frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["import { ReactNode } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\ninterface ProtectedRouteProps {\r\n  children: ReactNode;\r\n  requiredRole?: 'admin' | 'project_manager' | 'team_member';\r\n}\r\n\r\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ \r\n  children, \r\n  requiredRole \r\n}) => {\r\n  const { user, isLoading } = useAuth();\r\n\r\n  // Show loading state while checking authentication\r\n  if (isLoading) {\r\n    return (\r\n      <div style={{ \r\n        display: 'flex', \r\n        justifyContent: 'center', \r\n        alignItems: 'center', \r\n        height: '100vh',\r\n        backgroundColor: '#f8fafc'\r\n      }}>\r\n        <div style={{ \r\n          textAlign: 'center',\r\n          padding: '2rem',\r\n          backgroundColor: 'white',\r\n          borderRadius: '8px',\r\n          boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\r\n        }}>\r\n          <div style={{ fontSize: '1.5rem', marginBottom: '1rem' }}>‚è≥</div>\r\n          <p style={{ margin: 0, color: '#6b7280' }}>Loading...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Redirect to login if not authenticated\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  // Check role if requiredRole is specified\r\n  if (requiredRole) {\r\n    // Define role hierarchy (admin has access to everything)\r\n    const roleHierarchy = {\r\n      'admin': ['admin', 'project_manager', 'team_member'],\r\n      'project_manager': ['project_manager', 'team_member'],\r\n      'team_member': ['team_member']\r\n    };\r\n\r\n    const userRole = user.role;\r\n    const allowedRoles = roleHierarchy[requiredRole] || [requiredRole];\r\n    \r\n    if (!allowedRoles.includes(userRole)) {\r\n      return (\r\n        <div style={{ \r\n          display: 'flex', \r\n          flexDirection: 'column',\r\n          justifyContent: 'center', \r\n          alignItems: 'center', \r\n          height: '60vh',\r\n          padding: '2rem',\r\n          textAlign: 'center',\r\n          backgroundColor: '#f8fafc'\r\n        }}>\r\n          <div style={{ \r\n            backgroundColor: 'white',\r\n            padding: '2rem',\r\n            borderRadius: '8px',\r\n            boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\r\n            maxWidth: '400px',\r\n            width: '100%'\r\n          }}>\r\n            <div style={{ fontSize: '3rem', marginBottom: '1rem' }}>üö´</div>\r\n            <h2 style={{ \r\n              color: '#ef4444', \r\n              marginBottom: '1rem',\r\n              fontSize: '1.5rem'\r\n            }}>\r\n              Access Denied\r\n            </h2>\r\n            <p style={{ \r\n              color: '#6b7280', \r\n              marginBottom: '2rem',\r\n              lineHeight: '1.5'\r\n            }}>\r\n              You don't have permission to access this page.<br />\r\n              <strong>Required role: {requiredRole.replace('_', ' ')}</strong><br />\r\n              <span style={{ fontSize: '0.875rem' }}>\r\n                Your role: {user.role.replace('_', ' ')}\r\n              </span>\r\n            </p>\r\n            <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center' }}>\r\n              <button \r\n                onClick={() => window.history.back()}\r\n                style={{\r\n                  padding: '0.75rem 1.5rem',\r\n                  backgroundColor: '#3b82f6',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  cursor: 'pointer',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                Go Back\r\n              </button>\r\n              <button \r\n                onClick={() => window.location.href = '/dashboard'}\r\n                style={{\r\n                  padding: '0.75rem 1.5rem',\r\n                  backgroundColor: '#6b7280',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  cursor: 'pointer',\r\n                  fontWeight: '500'\r\n                }}\r\n              >\r\n                Go to Dashboard\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  // If all checks pass, render the children\r\n  return <>{children}</>;\r\n};\r\n\r\nexport default ProtectedRoute;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}